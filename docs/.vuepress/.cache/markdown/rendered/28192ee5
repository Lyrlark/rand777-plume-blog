{"content":"<p>为实现一个类似 <code v-pre>select</code> 下拉选择框效果，想到用 <code v-pre>click</code> 与 <code v-pre>blur</code> 事件来处理，但在实践过程中发现 <code v-pre>div</code> 正常情况下是无法获得焦点的。</p>\n<!-- more -->  \n<p>后来知道了需要添加 <code v-pre>tabindex</code> 属性。<br>\n<code v-pre>tabindex</code> 全局属性指示其元素是否可以聚焦，以及它是否/在何处参与顺序键盘导航（通常使用Tab键，因此得名）。\n下面是<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/tabindex\" target=\"_blank\" rel=\"noopener noreferrer\">MDN社区</a>对 <code v-pre>tabindex</code> 属性值的说明：</p>\n<blockquote>\n<p>tabindex=负值 (通常是 tabindex=“-1”)，表示元素是可聚焦的，但是不能通过键盘导航来访问到该元素， 用 JS 做页面小组件内部键盘导航的时候非常有用。<br>\ntabindex=&quot;0&quot; ，表示元素是可聚焦的，并且可以通过键盘导航来聚焦到该元素，它的相对顺序是当前处于的 DOM 结构来决定的。<br>\ntabindex=正值，表示元素是可聚焦的，并且可以通过键盘导航来访问到该元素；它的相对顺序按照tabindex 的数值递增而滞后获焦。如果多个元素拥有相同的 tabindex，它们的相对顺序按照他们在当前 DOM 中的先后顺序决定。</p>\n</blockquote>\n<p>因此要让 <code v-pre>div</code> 支持 <code v-pre>focus/blur</code> 事件只需添加 <code v-pre>tabindex</code> 属性：</p>\n<div class=\"language-html\" data-highlighter=\"shiki\" data-ext=\"html\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> tabindex</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> @click</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Fn</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> @blur</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Fn</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span></code></pre>\n</div>","env":{"base":"/","filePath":"G:/200-Project/hoey-blog-plume/docs/技文/23072701.md","filePathRelative":"技文/23072701.md","frontmatter":{"title":"让div标签支持focus/blur事件","createTime":"2023/7/27","tags":["Vue"],"permalink":"/article/23072701/"},"sfcBlocks":{"template":{"type":"template","content":"<template><p>为实现一个类似 <code v-pre>select</code> 下拉选择框效果，想到用 <code v-pre>click</code> 与 <code v-pre>blur</code> 事件来处理，但在实践过程中发现 <code v-pre>div</code> 正常情况下是无法获得焦点的。</p>\n<!-- more -->  \n<p>后来知道了需要添加 <code v-pre>tabindex</code> 属性。<br>\n<code v-pre>tabindex</code> 全局属性指示其元素是否可以聚焦，以及它是否/在何处参与顺序键盘导航（通常使用Tab键，因此得名）。\n下面是<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/tabindex\" target=\"_blank\" rel=\"noopener noreferrer\">MDN社区</a>对 <code v-pre>tabindex</code> 属性值的说明：</p>\n<blockquote>\n<p>tabindex=负值 (通常是 tabindex=“-1”)，表示元素是可聚焦的，但是不能通过键盘导航来访问到该元素， 用 JS 做页面小组件内部键盘导航的时候非常有用。<br>\ntabindex=&quot;0&quot; ，表示元素是可聚焦的，并且可以通过键盘导航来聚焦到该元素，它的相对顺序是当前处于的 DOM 结构来决定的。<br>\ntabindex=正值，表示元素是可聚焦的，并且可以通过键盘导航来访问到该元素；它的相对顺序按照tabindex 的数值递增而滞后获焦。如果多个元素拥有相同的 tabindex，它们的相对顺序按照他们在当前 DOM 中的先后顺序决定。</p>\n</blockquote>\n<p>因此要让 <code v-pre>div</code> 支持 <code v-pre>focus/blur</code> 事件只需添加 <code v-pre>tabindex</code> 属性：</p>\n<div class=\"language-html\" data-highlighter=\"shiki\" data-ext=\"html\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> tabindex</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> @click</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Fn</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> @blur</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Fn</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span></code></pre>\n</div></template>","contentStripped":"<p>为实现一个类似 <code v-pre>select</code> 下拉选择框效果，想到用 <code v-pre>click</code> 与 <code v-pre>blur</code> 事件来处理，但在实践过程中发现 <code v-pre>div</code> 正常情况下是无法获得焦点的。</p>\n<!-- more -->  \n<p>后来知道了需要添加 <code v-pre>tabindex</code> 属性。<br>\n<code v-pre>tabindex</code> 全局属性指示其元素是否可以聚焦，以及它是否/在何处参与顺序键盘导航（通常使用Tab键，因此得名）。\n下面是<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/tabindex\" target=\"_blank\" rel=\"noopener noreferrer\">MDN社区</a>对 <code v-pre>tabindex</code> 属性值的说明：</p>\n<blockquote>\n<p>tabindex=负值 (通常是 tabindex=“-1”)，表示元素是可聚焦的，但是不能通过键盘导航来访问到该元素， 用 JS 做页面小组件内部键盘导航的时候非常有用。<br>\ntabindex=&quot;0&quot; ，表示元素是可聚焦的，并且可以通过键盘导航来聚焦到该元素，它的相对顺序是当前处于的 DOM 结构来决定的。<br>\ntabindex=正值，表示元素是可聚焦的，并且可以通过键盘导航来访问到该元素；它的相对顺序按照tabindex 的数值递增而滞后获焦。如果多个元素拥有相同的 tabindex，它们的相对顺序按照他们在当前 DOM 中的先后顺序决定。</p>\n</blockquote>\n<p>因此要让 <code v-pre>div</code> 支持 <code v-pre>focus/blur</code> 事件只需添加 <code v-pre>tabindex</code> 属性：</p>\n<div class=\"language-html\" data-highlighter=\"shiki\" data-ext=\"html\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> tabindex</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> @click</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Fn</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> @blur</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Fn</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span></code></pre>\n</div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"为实现一个类似 `select` 下拉选择框效果，想到用 `click` 与 `blur` 事件来处理，但在实践过程中发现 `div` 正常情况下是无法获得焦点的。\r\n<!-- more -->  \r\n后来知道了需要添加 `tabindex` 属性。  \r\n`tabindex` 全局属性指示其元素是否可以聚焦，以及它是否/在何处参与顺序键盘导航（通常使用Tab键，因此得名）。\r\n下面是[MDN社区](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/tabindex)对 `tabindex` 属性值的说明：  \r\n> tabindex=负值 (通常是 tabindex=“-1”)，表示元素是可聚焦的，但是不能通过键盘导航来访问到该元素， 用 JS 做页面小组件内部键盘导航的时候非常有用。  \r\n> tabindex=\"0\" ，表示元素是可聚焦的，并且可以通过键盘导航来聚焦到该元素，它的相对顺序是当前处于的 DOM 结构来决定的。  \r\n> tabindex=正值，表示元素是可聚焦的，并且可以通过键盘导航来访问到该元素；它的相对顺序按照tabindex 的数值递增而滞后获焦。如果多个元素拥有相同的 tabindex，它们的相对顺序按照他们在当前 DOM 中的先后顺序决定。  \r\n\r\n因此要让 `div` 支持 `focus/blur` 事件只需添加 `tabindex` 属性：\r\n```html\r\n<div tabindex=\"-1\" @click=\"Fn\" @blur=\"Fn\"></div>\r\n```","excerpt":"","includedFiles":[],"tasklistId":0,"title":"","headers":[]}}
