---
title: 'UVï¼šRusté‡å†™çš„å¿«é€ŸPythonåŒ…ç®¡ç†å™¨'
createTime: 2025/07/17 10:48:22
permalink: /article/20250717/
tags:
  - Python
  - Rust
  - Shell
---

[//]: # (TODO: å†™ä¸€ä¸‹)

<RepoCard repo="astral-sh/uv"></RepoCard>

å‰æ®µæ—¶é—´ï¼Œæ— æ„ä¸­äº†è§£åˆ°ä¸€ä¸ªåä¸º `UV` çš„ Rust é‡å†™çš„å¿«é€ŸåŒ…ç®¡ç†å™¨ï¼Œæ„Ÿè§‰éå¸¸æœ‰è¶£ï¼Œä¸ºä»€ä¹ˆä¸ç”¨pipå‘¢ï¼Œå„ç§åŒ…ç®¡ç†å™¨çš„åŒºåˆ«å’Œè”ç³»ã€ä¼˜ç¼ºç‚¹åœ¨å“ªé‡Œï¼Ÿè¿™æ®µæ—¶é—´ç”¨ä¸‹æ¥ï¼Œæ„Ÿè§‰éå¸¸ä¸é”™ï¼Œé€Ÿåº¦å¿«ã€åŠŸèƒ½å¼ºå¤§ã€ä½¿ç”¨ç®€å•ï¼Œç‰ˆæœ¬ä¾èµ–ç®¡ç†å°¤å…¶çªå‡ºã€‚

Windowsç”¨æˆ·ä½¿ç”¨ç®¡ç†å‘˜æ¨¡å¼çš„powershellæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…å³å¯ï¼Œå¦‚æœæœ‰æŠ¥é”™é—®é—®GPTå°±å¯ä»¥äº†ï¼Œå¤šåŠæ˜¯æƒé™çš„é—®é¢˜ã€‚

```shell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

å…¶ä»–æ–¹å¼å’Œæ“ä½œç³»ç»Ÿå®‰è£…å‚è€ƒï¼š[https://docs.astral.sh/uv/getting-started/installation/#standalone-installer](https://docs.astral.sh/uv/getting-started/installation/#standalone-installer)

## ç®€å•å°è¯•

### Pythonç®¡ç†

åæ­£å°± `uv python`+ å‘½ä»¤ï¼Œä¸€èˆ¬æ˜¯å…ˆ`list`çœ‹å“ªäº›ç‰ˆæœ¬å¯ä»¥ä¸‹ï¼Œ`find`çœ‹å®‰è£…äº†ä»€ä¹ˆç‰ˆæœ¬ï¼Œ`install`å®‰è£…ï¼Œ`uninstall`å¸è½½ï¼Œ`pin`ç‰¹å®šç‰ˆæœ¬åˆ°é¡¹ç›®ã€‚

å®‰è£…æœ€æ–°ç‰ˆcpython
```shell æ˜¯
uv python install [ç‰ˆæœ¬å·] --reinstall(å¯é€‰ï¼Œè¦†ç›–å®‰è£…)
```

å‡çº§pythonç‰ˆæœ¬
```shell
uv python upgrade
```

### ä»£ç†æ‰§è¡Œ

:::note
å‰ææ˜¯.pyæ–‡ä»¶ä¸­å¯¼å…¥çš„åŒ…ä¸º[æ ‡å‡†ç±»åº“](https://docs.python.org/3/library/index.html)ï¼Œä¾‹å¦‚ `import os`ã€`import sys` ç­‰ç­‰
:::

```shell
uv run <pythonæ–‡ä»¶> [å‚æ•°]
```

æœ‰ç‰¹å®šä¾èµ–é¡¹ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```shell
uv run <pythonæ–‡ä»¶> --with <ä¾èµ–é¡¹> [å‚æ•°]
```

### æ˜¾å¼å£°æ˜ä¾èµ–

> 2023å¹´10æœˆï¼Œpythonå®˜æ–¹å‘å¸ƒäº†[PEP 723](https://peps.python.org/pep-0723/)ï¼Œå¼•å…¥äº†å£°æ˜å¼å†…æ•›å…ƒæ•°æ®ä»¥åŠ`pyproject.toml`æ–‡ä»¶æ¥å£°æ˜é¡¹ç›®çš„ä¾èµ–é¡¹ã€‚

åˆå§‹åŒ–
```shell
uv init --script <pythonæ–‡ä»¶> --python <pythonç‰ˆæœ¬>
```

å£°æ˜è„šæœ¬ä¾èµ–ï¼Œè¿™é‡Œå‘ `example.py` æ–‡ä»¶æ·»åŠ äº† `requests` å’Œ `rich` è¿™ä¸¤ä¸ªä¾èµ–é¡¹ï¼Œç‰ˆæœ¬é™åˆ¶ä¸ºå°äº3çš„ç‰ˆæœ¬ã€‚

```shell
uv add --script example.py 'requests<3' 'rich'
```

### ä¿®æ”¹ä¸‹è½½åœ°å€ï¼ˆåŒ…ç´¢å¼•ï¼‰

å¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–é•œåƒæºï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹åŒ…ç´¢å¼•åœ°å€ï¼š

```shell
uv add --index "https://example.com/simple" --script example.py 'requests<3' 'rich'
```

ä¼šä¸€å¹¶å†™å…¥ `pyproject.toml` æ–‡ä»¶ä¸­ã€‚

```toml
# [[tool.uv.index]]
# url = "https://example.com/simple"
```

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºå®ƒçš„é•¿å¤„äº†ï¼Œå¯ä»¥æ˜¾ç¤ºå®šä¹‰ä¸‹è½½æºï¼Œç‰ˆæœ¬ä¾èµ–ï¼Œç”šè‡³å¯ä»¥æŒ‡å®šè„šæœ¬æ–‡ä»¶ã€‚

### é”å®šè„šæœ¬ä¾èµ–

ä¸é¡¹ç›®ä¸åŒï¼Œè„šæœ¬ä¾èµ–æ˜¯æŒ‡ç‰¹å®šè„šæœ¬æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤é”å®šè„šæœ¬ä¾èµ–ï¼š

```shell
uv lock --script example.py
```

ç”Ÿæˆçš„ç»“æ„å¦‚ä¸‹

@[code-tree title="Example" height="400px" entry="test.py.lock"](docs/.vuepress/public/code/20250717/test)

### ä½¿ç”¨ä¸åŒpython

```shell
uv run <pythonæ–‡ä»¶> --python <pythonç‰ˆæœ¬> [å‚æ•°]
```


## UVå·¥å…·

### uvx

åªæœ‰å½“åœ¨æ— å…³ç´§è¦çš„æµ‹è¯•ã€æ‰å¹³åŒ–é¡¹ç›®ä¸­ç”¨è¿™ä¸ªæ¯”è¾ƒåˆé€‚ï¼Œ`uvx` ç­‰ä»·äºä¸‹é¢çš„å‘½ä»¤ï¼šè¿™æ ·åšæ˜¯ä¸ºäº†é¢„å…ˆæµ‹è¯•æ£€æŸ¥å…¼å®¹pythonåŒ…ç‰ˆæœ¬ï¼Œä½ çŸ¥é“çš„ï¼Œpythonçš„åŒ…ç®¡ç†å°±å’Œé‡åº†çš„å¤©æ°”ä¸€æ ·ç³Ÿç³•ï¼ˆ

```shell
uv tool run
```

```shell
$ uvx pycowsay nb

  --
< nb >
  --
   \   ^__^
    \  (oo)\_______
       (__)\       )\/\
           ||----w |
           ||     ||

```

> è¿™ä¸ªç”¨çš„æ¯”è¾ƒå°‘ï¼Œæš‚æ—¶å†™åˆ°è¿™é‡Œã€‚é“¾æ¥ï¼š[https://docs.astral.sh/uv/guides/tools/#running-tools](https://docs.astral.sh/uv/guides/tools/#running-tools)

## é¡¹ç›®ç®¡ç†<Badge>å¸¸ç”¨</Badge>

```shell
uv init hello-world
cd hello-world
```

ç”Ÿæˆçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

@[code-tree title="hello-world" height="400px" entry="main.py"](docs/.vuepress/public/code/20250717/hello-world)

### é¡¹ç›®ç»“æ„

::: file-tree 

- ++ .venv
  - Scripts
    - include ## åŒ…å«çš„å¤´æ–‡ä»¶
    - lib ## æ‰€æœ‰çš„åŒ…å®‰è£…ä½ç½®
    - ...
    - python.exe ## å½“å‰ç‰ˆæœ¬pythonæ‰§è¡Œç¨‹åº
  - pyvenv.cfg
- .python-version
- README.md
- main.py
- pyproject.toml
- uv.lock
:::

#### pyproject.toml

> æŸ¥çœ‹[æ‰€æœ‰å­—æ®µ](https://packaging.python.org/en/latest/guides/writing-pyproject-toml/)

```toml title="pyproject.toml"
[project]
name = "hello-world" ##é¡¹ç›®åç§°
version = "0.1.0" ##é¡¹ç›®ç‰ˆæœ¬
description = "Add your description here" ##é¡¹ç›®æè¿°
readme = "README.md" ##é¡¹ç›®è¯´æ˜æ–‡ä»¶
requires-python = ">=3.13" ##éœ€è¦çš„pythonç‰ˆæœ¬
dependencies = [] ## ä¾èµ–é¡¹åˆ—è¡¨
```

ç°åœ¨æˆ‘ä»¬æ¥è¯•è¯•[å®‰è£…yolo](https://docs.ultralytics.com/zh/quickstart/)çš„ä¾èµ–é¡¹ï¼ŒPYPIçš„é•œåƒç«™ç‚¹ä¸‹è½½æœ€å¥½æŠŠä»£ç†å…³äº†æˆ–è€…è®¾ç½®é•œåƒã€‚

```shell title="install.sh"
uv add ultralytics
```

![20250719.png](/assets/20250719.png)

éå¸¸å¿«ï¼Œ10ç§’å†…å®Œæˆå‡ ç™¾å…†çš„æ–‡ä»¶ä¸‹è½½å’Œç´¢å¼•ï¼ï¼ˆä¸è¿‡ç½‘é€Ÿè¶³å¤Ÿå¯èƒ½æ‰è¡Œï¼‰

å˜åŒ–å¦‚ä¸‹ï¼š

```toml title="pyproject.toml"
[project]
name = "hello-world"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "matplotlib>=3.10.3", # [!code ++]
    "tqdm>=4.67.1", # [!code ++]
    "ultralytics>=8.3.168", # [!code ++]
]
```

#### .python-version

å‘Šè¯‰é¡¹ç›®ä½¿ç”¨çš„Pythonç‰ˆæœ¬å·ï¼Œåˆå§‹åŒ–åè‡ªå¸¦ï¼Œä¹Ÿå¯è‡ªå®šä¹‰

#### .venv

é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒï¼Œå³ä¸ç³»ç»Ÿå…¶ä½™éƒ¨åˆ†éš”ç¦»çš„ Python ç¯å¢ƒã€‚è¿™æ˜¯ uv å°†å®‰è£…é¡¹ç›®ä¾èµ–é¡¹çš„ä½ç½®ã€‚

#### uv.lock<Badge type="danger">é‡è¦</Badge>

uv.lock æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ lockfileï¼Œå…¶ä¸­åŒ…å«æœ‰å…³é¡¹ç›®ä¾èµ–é¡¹çš„ç¡®åˆ‡ä¿¡æ¯ï¼Œç±»ä¼¼ä¸npmä¸­çš„`package.lock`æˆ–`pnpm.lock`,ç”±uvè‡ªåŠ¨åŒ–æ§åˆ¶å’Œç”Ÿæˆï¼Œä¸è¦ä¿®æ”¹å®ƒã€‚å®ƒå¯ä»¥ï¼š

- å£°æ˜é¡¹ç›®çš„å¼€å‘å¹³å°
- å£°æ˜é¡¹ç›®æ‰€éœ€çš„Pythonç‰ˆæœ¬
- å£°æ˜åŒ…åŠå…¶ä¾èµ–çš„ä¸‹è½½åœ°å€ã€æ–‡ä»¶å“ˆå¸Œç­‰

:::note æ–‡ä»¶å“ˆå¸Œ

é€šè¿‡å“ˆå¸Œæ ¡éªŒç®—æ³•ç¡®è®¤åŒ…æœªè¢«ç¯¡æ”¹ï¼Œä¿éšœåŒ…çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚

:::

è¿™æ ·åšçš„å¥½å¤„æ˜¯è®©ä¸åŒå¹³å°çš„å¼€å‘è€…åœ¨å®‰è£…ä¾èµ–æ—¶è·å¾—ç›¸åŒçš„ç»“æœï¼Œç¡®ä¿é¡¹ç›®åœ¨ä¸åŒç¯å¢ƒä¸­çš„ä¸€è‡´æ€§ã€‚ï¼ˆå“‡ï¼Œå®‰è£…åŒ…å¾ˆå¤´ç–¼çš„å¥½å—ï¼Ÿï¼‰

åå¤„æ˜¯è‹¥ä¸‹è½½åœ°å€å¤±æ•ˆæˆ–åŒ…è¢«åˆ é™¤ï¼Œå¯èƒ½ä¼šå¯¼è‡´å®‰è£…å¤±è´¥ï¼Œå¯ä»¥[æ‰‹åŠ¨å°è¯•ä¿®æ”¹ä¸‹è½½åœ°å€](/article/20250717/#ä¿®æ”¹ä¸‹è½½åœ°å€-åŒ…ç´¢å¼•)ã€‚

```toml title="pyproject.toml"

```lock title="uv.lock"
version = 1
revision = 2
requires-python = ">=3.13"
resolution-markers = [
    "sys_platform == 'win32'", 
    "sys_platform == 'darwin'",
    "platform_machine == 'aarch64' and sys_platform == 'linux'",
    "(platform_machine != 'aarch64' and sys_platform == 'linux') or (sys_platform != 'darwin' and sys_platform != 'linux' and sys_platform != 'win32')",
]

[[package]]
name = "certifi"
version = "2025.7.14"
source = { registry = "https://mirrors.cernet.edu.cn/pypi/web/simple" }
sdist = { url = "https://cmcc.mirrors.ustc.edu.cn/pypi/packages/b3/76/52c535bcebe74590f296d6c77c86dabf761c41980e1347a2422e4aa2ae41/certifi-2025.7.14.tar.gz", hash = "sha256:8ea99dbdfaaf2ba2f9bac77b9249ef62ec5218e7c2b2e903378ed5fccf765995", size = 163981, upload-time = "2025-07-14T03:29:28.449Z" }
wheels = [
    { url = "https://cmcc.mirrors.ustc.edu.cn/pypi/packages/4f/52/34c6cf5bb9285074dc3531c437b3919e825d976fde097a7a73f79e726d03/certifi-2025.7.14-py3-none-any.whl", hash = "sha256:6b31f564a415d79ee77df69d757bb49a5bb53bd9f756cbbe24394ffd6fc1f4b2", size = 162722, upload-time = "2025-07-14T03:29:26.863Z" },
]
```

### æ·»åŠ ã€ç§»é™¤ä¾èµ–

> addã€remove

```shell
uv add requests
uv remove requests

# Specify a version constraint
uv add 'requests==2.31.0'

# Add a git dependency, æ‰‹åŠ¨æŒ‡å®š
uv add git+https://github.com/psf/requests
```

### ä»requirements.txtä¸­åŒæ­¥

åœ¨å¸¸è§çš„pipç®¡ç†çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ° `requiremts.txt` æ¥ç®¡ç†é¡¹ç›®ï¼Œuvæ”¯æŒè¿ç§»

```shell
uv add -r requirements.txt -c constraints.txt
```
### å‡çº§æŸä¸ªåŒ…

æ­£å¸¸çš„æµç¨‹æ˜¯å…ˆé”å®šå…¶ä»–åŒ…çš„ç‰ˆæœ¬ï¼Œå†æ‰§è¡ŒæŸä¸ªåŒ…çš„å‡çº§ä»»åŠ¡

```shell
uv lock --upgrade-package <package>
```

### æŸ¥è¯¢é¡¹ç›®ç‰ˆæœ¬

```shell
uv version

hello-world 0.1.0

uv version --short

0.1.0

uv version --output-format json

{
  "package_name": "hello-world",
  "version": "0.1.0",
  "commit_info": null
}

```

### åŒæ­¥ä¾èµ–

ä¸€èˆ¬è€Œè¨€ï¼Œå†™å¥½ä»£ç åä¸ºäº†è¿è¡Œèµ·æ¥ï¼Œæ–°å¢çš„ä¾èµ–æˆ‘ä»¬è‡ªç„¶è€Œç„¶å°±æŠŠä¾èµ–è£…å¥½äº†ï¼Œæ¯”å¦‚ `uv add`ã€‚ä½†æ˜¯å¦‚æœæ˜¯å›¢é˜Ÿåä½œä¸­ï¼Œå…¶ä»–äººå¯èƒ½æ²¡æœ‰å®‰è£…ä½ æ–°å¢çš„ä¾èµ–ï¼ˆåä¹‹äº¦ç„¶ï¼‰ï¼Œè¿™æ—¶å€™å°±éœ€è¦åŒæ­¥ä¾èµ–äº†ã€‚

```shell
uv sync # [!code warning] åŒæ­¥ä¾èµ–åˆ°uv.lockå’Œpyproject.toml
.venv\Scripts\activate ## windows
source .venv/bin/activate ## linux/macOS
flask run -p 3000
python example.py
```

:::note
æ¿€æ´»ç¯å¢ƒåï¼Œæ— éœ€å†ä½¿ç”¨ `uv` å‰ç¼€ï¼Œç›´æ¥ä½¿ç”¨ `python` å‘½ä»¤å³å¯è¿è¡Œè„šæœ¬ã€‚
:::

### é€ è½®å­

```shell
uv build
```

é»˜è®¤åœ¨å½“å‰ç›®å½•ç”Ÿæˆ`dist`ç›®å½•ï¼Œé‡Œé¢åŒ…å«äº†æ‰“åŒ…å¥½çš„æ–‡ä»¶ã€‚

:::file-tree title="dist" collapsed=true
- .venv
  - Scripts
    - include
    - lib
    - python.exe
  - pyvenv.cfg
- ++ dist
  - hello_world-0.1.0-py3-none-any.whl // wheelåŒ…ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„è½®å­
  - hello_world-0.1.0.tar.gz // æºç åŒ…
  - hello_world.egg-info // hutchåŒ…ä¿¡æ¯
    - dependency_links.txt
    - PKG-INFO
    - requires.txt
    - SOURCES.txt
    - top_level.txt
- main.py
- pyproject.toml
- uv.lock
- README.md
- .python-version
- .gitignore
- LICENSE
:::

## å‘å¸ƒåŒ…

### å‡çº§é¡¹ç›®ç‰ˆæœ¬å·

```shell
uv version n.e.w
```

å¹³çº§å‡çº§ï¼Œuvåˆ’åˆ†çš„æ ‡å‡†ä»å¤§åˆ°å°ä¸ºï¼šmajor, minor, patch, stable, alpha, beta, rc, post, and dev

```shell
# ä»ç¨³å®šç‰ˆåˆ°é¢„å‘å¸ƒç‰ˆ
uv version --bump patch --bump [alpha/beta/rc/post/dev]

# é¢„å‘å¸ƒç‰ˆçš„å†…éƒ¨å‡çº§
uv version --bump [alpha/beta/rc/post/dev]

# é¢„å‘å¸ƒç‰ˆåˆ°ç¨³å®šç‰ˆ
uv version --bump stable
```

:::note åŒæ­¥æ³¨æ„
æ‰§è¡Œ `uv version` åä¼šè‡ªåŠ¨æ›´æ–° `pyproject.toml` å’Œ `uv.lock` æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ã€‚ä¸å‡çº§è¯·æ‰§è¡Œ `--frozen` å‚æ•°
:::

[//]: # (TODO: å†™ä¸€ä¸‹å‘å¸ƒåŒ…çš„æµç¨‹ https://docs.astral.sh/uv/guides/package/#publishing-your-package https://docs.pypi.org/trusted-publishers/adding-a-publisher/#github-actions) 

[//]: # (### å‘å¸ƒåˆ°Github)

[//]: # ()
[//]: # (### å‘å¸ƒåˆ°PyPI)

[//]: # ()
[//]: # (### å‘å¸ƒåˆ°Gitlab)

## è¿ç§»
### pip2uv

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œpipä½¿ç”¨requirements.txtæ¥ç®¡ç†ä¾èµ–ã€‚ä¾‹å¦‚ï¼Œå†™å…¥å½“å‰é¡¹ç›®çš„ä¾èµ–ä½¿ç”¨ï¼š

:::note ç¯å¢ƒéš”ç¦»

è€ƒè™‘ä½¿ç”¨venvè™šæ‹Ÿç¯å¢ƒæ¥éš”ç¦»é¡¹ç›®ä¾èµ–ï¼Œé¿å…æŸä¸ªPythonç‰ˆæœ¬å…¨å±€å®‰è£…åŒ…çš„å†²çªï¼ˆæƒ³å“­äº†ğŸ˜­ï¼‰ã€‚

```shell
python -m venv
source .venv/bin/activate
pip ...
```
:::

å…¶ä¸­ä¸€ç§ç®¡ç†ä¾èµ–çš„æ–¹å¼æ˜¯`pip-compile`ç¼–è¯‘è§„åˆ™é›† requirements.in [+requirements.in] æ–‡ä»¶

[+requirements.in]: åœ¨é¡¹ç›®æœ€å®¹æ˜“å‡ºç°å…¼å®¹æ€§é—®é¢˜çš„åœ°æ–¹æœ€å¥½æµ‹è¯•äººå‘˜å†™ä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼Œæ‰‹åŠ¨æ§åˆ¶ç‰¹åˆ«è½¯ä»¶åŒ…çš„ç‰ˆæœ¬ã€‚

ä¾‹å¦‚ï¼Œ`requirements.in` æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```text title="requirements.in"
fastapi
pydantic>2
```

è¡¨ç¤º `fastapi` æ— ç‰ˆæœ¬çº¦æŸï¼Œ `pydantic` ç‰ˆæœ¬å¤§äº2.0.0ã€‚

æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥ç”Ÿæˆ `requirements.txt` æ–‡ä»¶ï¼š

```shell
pip-compile requirements.in -o requirements.txt
```

```text title="requirements.txt"
annotated-types==0.7.0
    # via pydantic
anyio==4.8.0
    # via starlette
fastapi==0.115.11 
    # via -r requirements.in // [!code warning]
idna==3.10 
    # via anyio
pydantic==2.10.6
    # via
    #   -r requirements.in // [!code warning]
    #   fastapi
pydantic-core==2.27.2
    # via pydantic
sniffio==1.3.1
    # via anyio
starlette==0.46.1
    # via fastapi
typing-extensions==4.12.2
    # via
    #   fastapi
    #   pydantic
    #   pydantic-core
```

è¿™ä¸ªç­‰åŒäº `uv pip compile `ï¼Œä¹Ÿæ˜¯ `pip-tools`ä¸­çš„ `pip-compile` å‘½ä»¤ã€‚


---

å¦å¤–ä¸€ç§æ¯”è¾ƒä¸å¸¸è§çš„æ–¹å¼æ˜¯ä½¿ç”¨ `pip freeze` å‘½ä»¤æ¥ç”Ÿæˆå½“å‰ç¯å¢ƒçš„ä¾èµ–åˆ—è¡¨ã€‚

```shell
pip freeze > requirements.txt
```

```text title="requirements.txt"
annotated-types==0.7.0
anyio==4.8.0
fastapi==0.115.11
idna==3.10
pydantic==2.10.6
pydantic-core==2.27.2
sniffio==1.3.1
starlette==0.46.1
typing-extensions==4.12.2
```

è±ªäº†ï¼Œæœ‰ä»¥ä¸Šçš„æ€è·¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ï¼š

:::steps
1. åˆ’åˆ†å„ç§ä¾èµ–ç¯å¢ƒ

    æ¯”å¦‚é¡¹ç›®æœ‰ dev | prod | staging ç­‰ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¾èµ–åˆ†ä¸ºä¸åŒçš„æ–‡ä»¶ï¼Œä¾‹å¦‚ `requirements-dev.in`ã€`requirements-prod.in` ç­‰ã€‚

2. ç¼–å†™è¿™äº›æ–‡ä»¶ä¸­çš„ç‰¹æ®Šä¾èµ–

    å†™å¥½ååˆ†åˆ«ä¿å­˜åˆ° `requirements-dev.in` å’Œ `requirements-prod.in` æ–‡ä»¶ä¸­ã€‚

3. ä½¿ç”¨ `uv pip compile` å‘½ä»¤ç¼–è¯‘æ¯ä¸ªç¯å¢ƒçš„ä¾èµ–

    ```shell
    uv pip compile requirements-dev.in -o requirements-dev.txt
    # æˆ–è€… pip-compile requirements-dev.in -o requirements-dev.txt
    uv pip compile requirements-prod.in -o requirements-prod.txt
    ```
4. å®‰è£…ä¾èµ–

    ```shell
    pip install -r requirements-dev.txt
    pip install -r requirements-prod.txt
    ```

:::

ä¸Šé¢è®¨è®ºçš„åŒä¸€ä¸ªé¡¹ç›®ä¸­ä¸åŒå¼€å‘ç¯å¢ƒçš„ä¾èµ–ç®¡ç†ã€‚å†æ‰©å±•ä¸‹ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

ä¸è¿‡ uv æ”¯æŒè·¨å¹³å°è§£æï¼Œéå¸¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ `tqdm`

```requirements.in
tqdm
```

ä¸¤ä¸ªå¹³å°çš„è§£æä¸º

:::tabs

@tab ::skill-icons:linux-dark::Linux

```text
tqdm==4.67.1
    # via -r requirements.in
```



@tab ::logos:microsoft-windows-icon::Windows

```text
colorama==0.4.6
# via tqdm

tqdm==4.67.1
    # via -r requirements.in
```

:::

> colorama: Windowså¹³å°ä¸‹çš„tqdméœ€è¦coloramaåŒ…æ¥æ”¯æŒç»ˆç«¯é¢œè‰²è¾“å‡º

è¿™æ ·æ¯ä¸ªå¹³å°é—´æ˜¯ä¸å…¼å®¹çš„ï¼Œ

å¦‚æœä½¿ç”¨ uv çš„ `universal` é€‰é¡¹ ï¼Œåˆ™ä¼šå£°æ˜coloramaçš„å¹³å°ï¼š

```shell
uv pip compile --universal requirements.in 
```

```text title="requirements.txt"
colorama==0.4.6 ; sys_platform == 'win32' # è¿™é‡Œå°±å£°æ˜äº†
    # via tqdm
tqdm==4.67.1
    # via -r requirements.in
```