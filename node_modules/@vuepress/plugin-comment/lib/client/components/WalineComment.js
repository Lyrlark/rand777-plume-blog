import{useLocaleConfig as d,wait as f,LoadingIcon as c}from"@vuepress/helper/client";import{watchImmediate as g}from"@vueuse/core";import{pageviewCount as L}from"@waline/client/pageview";import{defineComponent as w,computed as n,onMounted as C,nextTick as h,h as l,defineAsyncComponent as y}from"vue";import{usePageFrontmatter as W,usePageLang as A}from"vuepress/client";import"@waline/client/waline.css";import"../styles/waline.css";import{c as N}from"../index-QRWp8FXN.js";const E=WALINE_LOCALES;WALINE_META&&import("@waline/client/waline-meta.css");var I=w({name:"WalineComment",props:{identifier:{type:String,required:!0}},setup(a){const e=N(),u=W(),m=A(),p=d(E);let t=null;const i=n(()=>!!e.value.serverURL),r=n(()=>{if(!i.value)return!1;const v=e.value.pageview!==!1,o=u.value.pageview;return!!o||v&&o!==!1}),s=n(()=>({lang:m.value==="zh-CN"?"zh-CN":"en",locale:p.value,dark:"[data-theme='dark']",...e.value,path:a.identifier}));return C(()=>{g(()=>[a.identifier,e.value.serverURL,e.value.delay,r.value],async()=>{t?.(),t=null,r.value&&(await h(),await f(e.value.delay??800),t=L({serverURL:e.value.serverURL,path:a.identifier}))})}),()=>i.value?l("div",{id:"comment",class:"waline-wrapper"},l(y({loader:async()=>(await import("@waline/client/component")).Waline,loadingComponent:c}),s.value)):null}});export{I as default};
//# sourceMappingURL=WalineComment.js.map
